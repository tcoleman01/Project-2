<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Log In â€¢ VG Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/modules/game.css" />
</head>
<body class="bg-dark text-light">
  <main class="container page page--narrow py-4">
    <h1 class="h3 mb-3">Video Game Tracker Login</h1>

   <form id="loginForm" class="vstack gap-3">
  <div>
    <label for="email" class="form-label">Email</label>
    <input id="email" class="form-control" type="email" name="email" required />
  </div>

  <div>
    <label for="password" class="form-label">Password</label>
    <input id="password" class="form-control" type="password" name="password" required />
  </div>

  <!--  Login button -->
<a id="loginLink" class="btn btn-primary w-100 text-center d-block">Log In</a>

  <!-- Forgot password + signup links -->
  <p class="text-center mt-3 mb-0">
    <a href="forget-password.html" class="auth-link">Forgot your password?</a>
  </p>

  <p class="text-center mt-2 mb-0">
    New here?
    <a href="signup.html" class="auth-link">Create an account</a>
  </p>
</form>

<script>
  (function () {
    const link = document.getElementById('loginLink');
    if (!link) return;

    link.addEventListener('click', function (e) {
      e.preventDefault();

      // ensure minimal session so user-profile.html doesn't redirect back
      const email = document.getElementById('email')?.value || 'demo@example.com';
      localStorage.setItem('vg_session', JSON.stringify({ email }));

      // choose path based on host (GitHub Pages vs local)
      const onGh = location.hostname.endsWith('github.io');
      const target = onGh
        ? '/Project-2/frontend/user-profile.html'
        : 'user-profile.html';

      location.href = target;
    });
  })();
</script>


    <p id="msg" class="mt-3 text-warning"></p>
  </main>

  <script type="module" src="./js/auth-api.js"></script>
</body>
</html>
